{"version":3,"file":"StressTest.stories-d22f934b.js","sources":["../../stories/StressTest.tsx","../../stories/StressTest.stories.mdx"],"sourcesContent":["import React, {\n  useCallback,\n  useState,\n} from \"react\";\n\nimport addDays from \"date-fns/addDays\";\n\nimport { DndProvider } from \"react-dnd\";\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\n\nimport {\n  Gantt,\n  OnChangeTasks,\n  Task,\n  TaskOrEmpty,\n} from \"../src\";\n\nimport {\n  onAddTask,\n  onEditTask,\n} from \"./helper\";\n\nimport \"../dist/index.css\";\n\nconst NUMBER_OF_ROOTS = 4;\nconst NUMBER_OF_SUBTASKS = 4;\nconst DEPTH = 4;\n\n// 4 * ()\n\ntype AppProps = {\n  ganttHeight?: number;\n};\n\nconst initSubtasks = (\n  res: Task[],\n  parentId: string,\n  parentStartDate: Date,\n  parentName: string,\n  currentDepth: number,\n) => {\n  const restDepth = DEPTH - currentDepth;\n  const taskDuration = Math.pow(NUMBER_OF_SUBTASKS, restDepth);\n\n  let prevTaskId: string | null = null;\n\n  for (let j = 0; j < NUMBER_OF_SUBTASKS; ++j) {\n    const taskId = `${parentId}/task_${j + 1}`;\n    const taskName = `${parentName}.${j + 1}`;\n\n    const startDate = addDays(parentStartDate, j * taskDuration);\n    const endDate = addDays(parentStartDate, (j + 1) * taskDuration);\n\n    const task: Task = {\n      start: startDate,\n      end: endDate,\n      name: taskName,\n      id: taskId,\n      progress: 45,\n      type: \"task\",\n      parent: parentId,\n      dependencies: prevTaskId\n      ? [\n        {\n          ownTarget: \"startOfTask\",\n          sourceTarget: \"endOfTask\",\n          sourceId: prevTaskId,\n        },\n      ]\n      : undefined,\n    };\n\n    prevTaskId = taskId;\n    res.push(task);\n\n    if (restDepth > 0) {\n      initSubtasks(\n        res,\n        taskId,\n        startDate,\n        taskName,\n        currentDepth + 1,\n      );\n    }\n  }\n};\n\nconst initTasks = () => {\n  const res: Task[] = [];\n\n  const firstStartDate = new Date();\n  const firstEndDate = addDays(firstStartDate, Math.pow(NUMBER_OF_SUBTASKS, DEPTH));\n\n  for (let i = 0; i < NUMBER_OF_ROOTS; ++i) {\n    const projectStartDate = addDays(firstStartDate, i);\n    const projectEndDate = addDays(firstEndDate, i);\n\n    const projectId = `project_${i + 1}`;\n    const projectName = `Project #${i + 1}`;\n\n    const project: Task = {\n      start: projectStartDate,\n      end: projectEndDate,\n      name: projectName,\n      id: projectId,\n      progress: 25,\n      type: \"project\",\n    };\n\n    res.push(project);\n\n    initSubtasks(\n      res,\n      projectId,\n      projectStartDate,\n      `Task #${i + 1}`,\n      1,\n    );\n  }\n\n  return res;\n};\n\nexport const StressTest: React.FC<AppProps> = (props) => {\n  const [tasks, setTasks] = useState<readonly TaskOrEmpty[]>(initTasks);\n\n  const onChangeTasks = useCallback<OnChangeTasks>((nextTasks, action) => {\n    switch (action.type) {\n      case \"delete_relation\":\n        if (window.confirm(`Do yo want to remove relation between ${action.payload.taskFrom.name} and ${action.payload.taskTo.name}?`)) {\n          setTasks(nextTasks);\n        }\n        break;\n\n      case \"delete_task\":\n        if (window.confirm(`Are you sure about ${action.payload.task.name}?`)) {\n          setTasks(nextTasks);\n        }\n        break;\n\n      default:\n        setTasks(nextTasks);\n        break;\n    }\n  }, []);\n\n  const handleDblClick = useCallback((task: Task) => {\n    alert(\"On Double Click event Id:\" + task.id);\n  }, []);\n\n  const handleClick = useCallback((task: Task) => {\n    console.log(\"On Click event Id:\" + task.id);\n  }, []);\n\n  return (\n    <DndProvider backend={HTML5Backend}>\n      <Gantt\n        {...props}\n        onAddTask={onAddTask}\n        onChangeTasks={onChangeTasks}\n        onDoubleClick={handleDblClick}\n        onEditTask={onEditTask}\n        onClick={handleClick}\n        tasks={tasks}\n      />\n    </DndProvider>\n  );\n};\n","import { Meta, Story } from '@storybook/addon-docs';\n\nimport { Gantt } from '../src';\n\nimport { StressTest } from './StressTest';\n\n<Meta\n  title=\"StressTest\"\n  component={Gantt}\n/>\n\nexport const Template = (props) => {\n  return <StressTest {...props} />;\n}\n\n# Stress test example\n\n<Story name=\"StressTest\">\n  {Template.bind({})}\n</Story>\n"],"names":["NUMBER_OF_ROOTS","NUMBER_OF_SUBTASKS","DEPTH","initSubtasks","__name","res","parentId","parentStartDate","parentName","currentDepth","restDepth","taskDuration","prevTaskId","j","taskId","taskName","startDate","addDays","endDate","task","undefined","initTasks","firstStartDate","firstEndDate","i","projectStartDate","projectEndDate","projectId","projectName","project","StressTest","props","tasks","setTasks","useState","onChangeTasks","useCallback","nextTasks","action","handleDblClick","alert","handleClick","console","_jsx","DndProvider","HTML5Backend","Template","_createMdxContent","_components","Object","assign","h1","_provideComponents","components","_jsxs","_Fragment","children","Meta","title","component","Gantt","Story","name","bind","MDXContent","wrapper","MDXLayout","stressTest","storyName","parameters","storySource","source","componentMeta","includeStories","mdxStoryNameToKey","docs","page","_jsx2","AddContext","__namedExportsOrder"],"mappings":"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"}